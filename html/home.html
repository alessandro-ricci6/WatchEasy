<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>WatchEasy - Home</title>
</head>
<body>
    
    <header>
        <nav class="navbar navbar-expand navbar-expand-lg bg-dark">
            <div class="container-fluid">
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <button class="menuBtn me-auto mb-2 mb-lg-0 btn btn-dark" type="button" data-bs-toggle="offcanvas" data-bs-target="#staticBackdrop" aria-controls="staticBackdrop">
                    <span class="fa-solid fa-bars"></span>
                </button>
                <h1 class="mx-3"><a class="text-decoration-none text-light" href="index.php">WatchEasy</a></h1>
                <button type="button" class="btn btn-dark me-2 position-relative border border-1" data-bs-toggle="modal" data-bs-target="#notificationModal">
                  <span class="fa-solid fa-envelope"></span>
                  <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="notificationCounter">
                    3
                    <span class="visually-hidden">unread messages</span>
                  </span>
                </button>
              </div>
            </div>
          </nav>
    </header>

    <!-- Menu -->
    <div class="offcanvas offcanvas-start" data-bs-backdrop="static" tabindex="-1" id="staticBackdrop" aria-labelledby="staticBackdropLabel">
        <div class="offcanvas-header bg-dark">
          <h2 class="offcanvas-title text-light" id="staticBackdropLabel">Menu</h2>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body bg-dark">
          <div>
            <nav class="menu">
              <ul class="list-unstyled px-3">
                <li class="pt-2"><a href="#">Home</a></li>
                <li class="pt-2"><a  href="#">Profilo</a></li>
                <li class="pt-2"><a  href="#">Feed</a></li>
              </ul>
            </nav>
          </div>
        </div>
        <div class="bg-dark d-flex justify-content-center">
          <a class="text-danger link-underline link-underline-opacity-0 bg-dark pb-2" href="#">Log Out</a>
        </div>
      </div>

      <!-- Modal for notification -->
    <div class="modal fade" id="notificationModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h3 class="modal-title fs-5">Notification</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <ul class="list-group notificationList" id="notificationList">
                    <!-- Notifica da leggere -->
                    <li class="notification list-group-item border">
                        <a class="link-underline link-underline-opacity-0 fs-6" href="#">user1 </a> ha messo mi piace al
                        <a class="link-underline link-underline-opacity-0 fs-6" href="#">tuo post</a>
                        <button class="readNotification btn float-end" data-notification-id="notification1"><span class="fa-solid fa-check"></span></button>
                    </li>
                    <!-- Notifica letta -->
                    <li class="notification list-group-item border list-group-item-secondary">
                        <a class="link-underline link-underline-opacity-0 fs-6" href="#">user1 </a> ha messo mi piace al
                        <a class="link-underline link-underline-opacity-0 fs-6" href="#">tuo post</a>
                        <button class="readNotification btn float-end" data-notification-id="notification1"><span class="fa-solid fa-check"></span></button>
                    </li>
                    <li class="notification list-group-item border">
                        <a class="link-underline link-underline-opacity-0 fs-6" href="#">user1 </a> ha iniziato a seguirti
                        <button class="readNotification btn float-end" data-notification-id="notification1"><span class="fa-solid fa-check"></span></button>
                    </li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="readAllNotificationBtn">Read All</button>
            </div>
            </div>
        </div>
    </div>

    <!-- Aside with User search bar and Add a post button -->
    <aside class="col-md-3 px-3 pt-1 m-3 float-md-end sticky-md-top d-flex justify-content-center">
        <div class="text-center">
          <div class="userDiv border rounded">
            <label for="searchUser" class="px-2 py-1">Search user:<br><input type="text" name="searchUser" id="searchUser"></label>
            <div id="searchPopup">
                <a class="userSearchResult fs-6 text-dark link-underline link-underline-opacity-0" href="#">user1</a>
            </div>
          </div>
          <button type="button" class="btn btn-dark my-4" data-bs-toggle="modal" data-bs-target="#addPostModal">Add review</button>
        </div>
    </aside>

    <!-- Modal to create post-->
    <div class="modal" id="addPostModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title fs-5">New Review</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="#" method="POST" id="createPostForm">
                    <div class="row g-2">
                        <div class="pt-2 text-center">
                            <label for="showSelect">Select show:</label>
                        <select name="showSelect" class="form-select form-select-sm mb-3" id="showSelect">
                            <label for="startingOption"><option id="startingOption" selected></option></label>
                            <option value="1">The Office</option>
                            <option value="2">Peaky Blinder</option>
                            <option value="3">Vikings</option>
                        </select>
                            <label for="uploadImg" class="form-label pt-1">Upload image:<input class="form-control form-control-sm" type="file" id="uploadImg" accept="image/png, image/jpg, image/jpeg" name="uploadImg"></label>
                        </div>
                        <label for="comment">Comment:</label>
                        <textarea class="rounded" name="comment" id="comment" cols="30" rows="6" maxlength="255" required></textarea>
                        </div>
                    <input type="submit" value="Post" class="btn btn-primary my-1" id="createPostBtn">
                    </form>
                </div>
            </div>
        </div>
    </div>

    <main class="float-md-start col-md-7">
        <div class="d-flex flex-column justify-content-center mx-4 px-3" id="postContainer">
            <!-- Post 1-->
                <div class="card my-3" id="cardPost1">
                    <img class="card-img-top" src="post1.png" alt="">
                  <div class="card-body">
                  <a class="float-end btn popoverPost" tabindex="0" role="button" data-post-id="1"
                  data-toggle="popover" data-bs-trigger="focus" data-bs-placement="bottom" data-bs-html="true" 
                  data-bs-content="<div class='d-flex justify-content-center'>
                  <a class='btn text-danger deleteBtn'>Delete</a></div>">
                  <span class="fa-solid fa-ellipsis-vertical"></span></a>
                    <h5 class="card-title"><a href="#">Breaking Bad</a></h5>
                    <h6 class="card-subtitle mb-2 text-body-secondary">
                      <a href="#"
                        ><span class="fa-solid fa-circle-user"></span>user1</a>
                    </h6>
                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc facilisis orci sed sem vulputate dignissim. Duis aliquet, augue eget mattis pellentesque, orci ex volutpat augue, sit amet fringilla lacus erat in metus. 
                    </p>
                    <button class="btn likeBtn" data-post-id="1" data-creator-id="3"><span class="likeNumber">1 </span><span class="likeIcon fa-regular fa-heart"></span></button>
                    <button
                      class="btn"
                      id="commentBtn1"
                      data-bs-toggle="collapse"
                      data-bs-target="#comments-collapse1"
                    > 1 <span class="fa-regular fa-comment"></span>
                    </button>
                    <div id="comments-collapse1" class="collapse">
                      <div class="commentDiv overflow-auto" style="max-height:150px">
                        <ul class="list-unstyled px-3" id="commentList1">
                          <li id="comment1"><a href="#">user1: </a> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc facilisis orci sed sem vulputate dignissim.</p>
                              <a class="commentAnswerOpen px-2 py-1" data-bs-toggle="collapse" href="#commentAnswer1"
                              role="button" aria-expanded="false" aria-controls="commentAnswer1"
                              >Vedi risposte</a>
                              <div class="collapse border-bottom" id="commentAnswer1">
                                <div>  
                                  <ul class="list-unstyled px-2" id="replyList1">
                                      <li id="commentReply1"><a href="#">
                                      user2: </a>
                                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc facilisis orci sed sem vulputate dignissim.</p>
                                    </li>
                                  </ul>
                                </div>
                                <div class="row g-2">
                                  <div class="col-md-10">
                                    <div class="form-floating">
                                      <input type="hidden" name="commentId" value="1">
                                      <textarea class="form-control my-2" placeholder="Leave a reply here" id="replyTextArea1" name="reply" required></textarea>
                                      <label for="replyTextArea1">Reply</label>
                                    </div>
                                  </div>
                                  <div class="col-md-1">
                                    <div class="form-floating">
                                      <button class="btn addReplyBtn" data-comment-id="1" data-post-id="1" data-creator-id="3">Add</button>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </li>
                        </ul>
                      </div>
                      <div class="row g-2">
                        <div class="col-md-10">
                          <div class="form-floating">
                            <input type="hidden" name="postId" value="1">
                            <textarea class="form-control" placeholder="Leave a comment here" id="commentTextArea1" name="comment" required></textarea>
                            <label for="commentTextArea1">Comments</label>
                          </div>
                        </div>
                        <div class="col-md-1">
                          <div class="form-floating">
                            <button class="btn addCommentBtn" data-post-id="1" data-creator-id="3">Add</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Post 2-->
                <div class="card my-3" id="cardPost2">
                  <div class="card-body">
                  <a class="float-end btn popoverPost" tabindex="0" role="button" data-post-id="2"
                  data-toggle="popover" data-bs-trigger="focus" data-bs-placement="bottom" data-bs-html="true" 
                  data-bs-content="<div class='d-flex justify-content-center'>
                  <a class='btn text-danger deleteBtn'>Delete</a></div>">
                  <span class="fa-solid fa-ellipsis-vertical"></span></a>
                    <h5 class="card-title"><a href="#">The office</a></h5>
                    <h6 class="card-subtitle mb-2 text-body-secondary">
                      <a href="#"
                        ><span class="fa-solid fa-circle-user"></span>user1</a>
                    </h6>
                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc facilisis orci sed sem vulputate dignissim. Duis aliquet, augue eget mattis pellentesque, orci ex volutpat augue, sit amet fringilla lacus erat in metus. 
                    </p>
                    <button class="btn likeBtn" data-post-id="1" data-creator-id="3"><span class="likeNumber">1 </span><span class="likeIcon fa-regular fa-heart"></span></button>
                    <button
                      class="btn"
                      id="commentBtn2"
                      data-bs-toggle="collapse"
                      data-bs-target="#comments-collapse2"
                    > 1 <span class="fa-regular fa-comment"></span>
                    </button>
                    <div id="comments-collapse2" class="collapse">
                      <div class="commentDiv overflow-auto" style="max-height:150px">
                        <ul class="list-unstyled px-3" id="commentList2">
                          <li id="comment2"><a href="#">user1: </a> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc facilisis orci sed sem vulputate dignissim.</p>
                              <a class="commentAnswerOpen px-2 py-1" data-bs-toggle="collapse" href="#commentAnswer2"
                              role="button" aria-expanded="false" aria-controls="commentAnswer2"
                              >Vedi risposte</a>
                              <div class="collapse border-bottom" id="commentAnswer2">
                                <div>  
                                  <ul class="list-unstyled px-2" id="replyList2">
                                      <li id="commentReply2"><a href="#">
                                      user2: </a>
                                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc facilisis orci sed sem vulputate dignissim.</p>
                                    </li>
                                  </ul>
                                </div>
                                <div class="row g-2">
                                  <div class="col-md-10">
                                    <div class="form-floating">
                                      <input type="hidden" name="commentId" value="1">
                                      <textarea class="form-control my-2" placeholder="Leave a reply here" id="replyTextArea2" name="reply" required></textarea>
                                      <label for="replyTextArea2">Reply</label>
                                    </div>
                                  </div>
                                  <div class="col-md-1">
                                    <div class="form-floating">
                                      <button class="btn addReplyBtn" data-comment-id="1" data-post-id="1" data-creator-id="3">Add</button>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </li>
                        </ul>
                      </div>
                      <div class="row g-2">
                        <div class="col-md-10">
                          <div class="form-floating">
                            <input type="hidden" name="postId" value="1">
                            <textarea class="form-control" placeholder="Leave a comment here" id="commentTextArea2" name="comment" required></textarea>
                            <label for="commentTextArea2">Comments</label>
                          </div>
                        </div>
                        <div class="col-md-1">
                          <div class="form-floating">
                            <button class="btn addCommentBtn" data-post-id="1" data-creator-id="3">Add</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
    </main>
</body>
</html>